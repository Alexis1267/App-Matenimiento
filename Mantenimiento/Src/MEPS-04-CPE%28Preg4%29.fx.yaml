"'MEPS-04-CPE(Preg4)' As screen":
    OnVisible: |
        =//Variables para traerme los datos de los inputs que se encuentran en la pantalla "Datos_MP"
        Set(Dato_Localizacion,Label8_11.Text);
        Set(Dato_NomMaquina,Label8_10.Text);
        Set(Dato_ClassMtto,Label8.Text);
        Set(Dato_Proc_No,Label8_9.Text);
        
        
        Set(DropdownInvolu,Split(Concat(Gallery2.AllItems, "" & Title2 & Char(10)),Char(10)));
        
        Set(DropdownAsig,Split(Concat(AsignadoOP, "" & NombreOp & Char(10)),Char(10)));
        
        ClearCollect(AsignadoOP,{NombreOp: Operador})

    Preg1_30 As label:
        Height: =46
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =11
        Text: ="13."
        Width: =33
        Y: =106
        ZIndex: =1

    Rectangle1_70 As rectangle:
        Fill: =RGBA(0, 40, 85, 1)
        Height: =59
        Width: =1366
        X: =0.00
        ZIndex: =23

    Label9_99 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Height: =59
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =25.51
        Text: ="Descripción de las Actividades a Realizar"
        Width: =1366
        X: =0.00
        ZIndex: =24

    Rectangle2_450 As rectangle:
        Fill: =RGBA(0, 40, 85, 1)
        Height: =7
        Width: =1366
        X: =0.00
        Y: =99
        ZIndex: =25

    Label10_452 As label:
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =16.58
        Text: ="Realizado"
        Width: =151.76
        X: =45.90
        Y: =59
        ZIndex: =26

    Label10_454 As label:
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =16.58
        Text: ="No realizado"
        Width: =159.43
        X: =225.75
        Y: =59
        ZIndex: =27

    Label10_451 As label:
        FontWeight: =FontWeight.Bold
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =16.58
        Text: ="[R] "
        Width: =45.90
        X: =0.00
        Y: =59
        ZIndex: =28

    Label10_453 As label:
        FontWeight: =FontWeight.Bold
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =16.58
        Text: ="[N] "
        Width: =63.77
        X: =181.10
        Y: =59
        ZIndex: =29

    Preg1_31 As label:
        Height: =44
        PaddingRight: =6.37
        PaddingTop: =6.37
        Text: =" Inspeccionar que el carro cuente con 4 barras de imanes esto ayuda a mantener en posición la lámina."
        Width: =1081
        X: =101
        Y: =106
        ZIndex: =30

    Resp1_5 As dropdown:
        AllowEmptySelection: =true
        BorderColor: =RGBA(0, 40, 85, 1)
        ChevronBackground: =RGBA(0, 40, 85, 1)
        ChevronHoverBackground: =ColorFade(RGBA(0, 40, 85, 1), -20%)
        DisabledFill: =RGBA(255, 255, 255, 1)
        Height: =26
        HoverFill: =RGBA(151, 157, 172, 1)
        Items: =["R","N"]
        OnSelect: |
            =If(
                IsBlank(Resp1_5.Selected),
                true
            )
        PaddingRight: =12.76
        PaddingTop: =12.76
        SelectionFill: =RGBA(92, 103, 125, 1)
        Size: =16.58
        Width: =67
        X: =33
        Y: =117
        ZIndex: =31

    Icon3_37 As icon.NextArrow:
        AutoDisableOnSelect: |
            =//If(
             // IsBlank(Respuesta1.Selected) || IsBlank(Respuesta2.Selected) || IsBlank(Respuesta3.Selected) || IsBlank(Respuesta4.Selected) || IsBlank(Respuesta5.Selected) || IsBlank(Respuesta6.Selected) || IsBlank(Respuesta7.Selected) || IsBlank(Respuesta8.Selected) || IsBlank(Respuesta9.Selected) || IsBlank(Respuesta10.Selected) || IsBlank(Respuesta11.Selected) || IsBlank(Respuesta12.Selected),true, false
            //)
        Color: |-
            =
            RGBA(0, 18, 107, 1)
        DisabledColor: |
            =BotonColor
        Fill: =RGBA(255,255,255,1)
        Height: =87
        Icon: =Icon.NextArrow
        OnSelect: |+
            =//If(
            //Respuesta1.Selected.Value = "R" && Respuesta2.Selected.Value = "R" && Respuesta3.Selected.Value = "R" &&Respuesta4.Selected.Value = "R" && Respuesta5.Selected.Value = "R" && Respuesta6.Selected.Value = "R" && Respuesta7.Selected.Value = "R" && Respuesta8.Selected.Value = "R" && Respuesta9.Selected.Value = "R" && Respuesta10.Selected.Value = "R" && Respuesta11.Selected.Value = "R" && Respuesta12.Selected.Value = "R"    , 
              //Navigate(Screen4, ScreenTransition.CoverRight),
            
            
              //If(
              //IsBlank(Hallazgo1.Text) && IsBlank(Hallazgo2.Text) && IsBlank(Hallazgo3.Text) && IsBlank(Hallazgo4.Text) && IsBlank(Hallazgo5.Text) && IsBlank(Hallazgo6.Text) || IsBlank(Hallazgo7.Text) || IsBlank(Hallazgo8.Text) || IsBlank(Hallazgo9.Text) || IsBlank(Hallazgo10.Text) || IsBlank(Hallazgo11.Text) || IsBlank(Hallazgo12.Text), 
              //Notify("Debes de llenar el campo vacio.", NotificationType.Error),
              //Navigate(Screen4,ScreenTransition.CoverRight)
            //);
             // IsBlank(Respuesta1.Selected) && IsBlank(Respuesta2.Selected) && IsBlank(Respuesta3.Selected) && IsBlank(Respuesta4.Selected) && IsBlank(Respuesta5.Selected) && IsBlank(Respuesta6.Selected) && IsBlank(Respuesta7.Selected) && IsBlank(Respuesta8.Selected) && IsBlank(Respuesta9.Selected) && IsBlank(Respuesta10.Selected) && IsBlank(Respuesta11.Selected) && IsBlank(Respuesta12.Selected), 
             // Notify("Debes de realizar todas las actividades.", NotificationType.Error)
            //);
            
            
            //ESTE CODIGO LO QUE ME ESTA HACIENDO ES UNA VALIDACION DE QUE SI EL DROPDOWN ESTA EN BLANCO O SI EL INPUT TEXT ESTA VISIBLE Y SI ESTA EN BLANCO, QUE ME DE UNA NOTIFICACION DE ERROR, PERO SI SE CUMPLE LA CONDICION QUE ME ENVIE A LA OTRA PAGINA
            /*If(
              IsBlank(Respuesta1_30.Selected) || Hallazgo1_30.Visible = true && IsBlank(Hallazgo1_30.Text) || IsBlank(Respuesta2_30.Selected) || Hallazgo2_30.Visible = true && IsBlank(Hallazgo2_30.Text) || IsBlank(Respuesta3_29.Selected) || Hallazgo3_29.Visible = true && IsBlank(Hallazgo3_29.Text) || IsBlank(Respuesta4_28.Selected) || Hallazgo4_28.Visible = true && IsBlank(Hallazgo4_28.Text) || IsBlank(Respuesta5_28.Selected) || Hallazgo5_28.Visible = true && IsBlank(Hallazgo5_28.Text)  || IsBlank(Respuesta6_25.Selected) || Hallazgo6_26.Visible = true && IsBlank(Hallazgo6_26.Text) || IsBlank(Respuesta7_24.Selected) || Hallazgo7_23.Visible = true && IsBlank(Hallazgo7_23.Text) || IsBlank(Respuesta8_19.Selected) || Hallazgo8_19.Visible = true && IsBlank(Hallazgo8_19.Text) || IsBlank(Respuesta9_18.Selected) || Hallazgo9_18.Visible = true && IsBlank(Hallazgo9_18.Text) || IsBlank(Respuesta10_15.Selected) || Hallazgo10_15.Visible = true && IsBlank(Hallazgo10_15.Text) || IsBlank(Respuesta11_21.Selected) || Hallazgo11_14.Visible = true && IsBlank(Hallazgo11_14.Text) || IsBlank(Respuesta12_1.Selected) || Hallazgo12_1.Visible = true && IsBlank(Hallazgo12_1.Text),Notify("Debes de contestar todos los campos.", NotificationType.Error) && Set(BotonColor,RGBA(106, 4, 15, 1)),Navigate('MP-MEPS-INP(Hallaz)',ScreenTransition.CoverRight) &&  Set(BotonColor, RGBA(0, 18, 107, 1))
            
            );*/
            
            
            /*ForAll(Filter(Respuesta1 = "N" && !IsBlank(Hallazgo1.Text)),
            Office365Outlook.SendEmailV2(
                "Alexis.Silva@Carrier.com",
                "Actividad : " && Pregunta1.Text,
                "Justificación del usuario: " && Hallazgo1.Text
            )
            );*/
            
            //Office365Outlook.SendEmailV2("Alexis.Silva@Carrier.com", User().FullName, "Pregunta de la app")
            
            
            Navigate('MEPS-04-CPE(Preg3)',ScreenTransition.CoverRight)
            
            
            
            
            
            
            
            
            
            
            
            
        PaddingRight: =0.00
        PaddingTop: =0.00
        Width: =88
        X: =1237
        Y: =672
        ZIndex: =39

    Icon1_37 As icon.BackArrow:
        Height: =86
        Icon: =Icon.BackArrow
        OnSelect: =Navigate('MEPS-04-CPE(Preg3)',ScreenTransition.Fade)
        PaddingRight: =0.00
        PaddingTop: =0.00
        Width: =147.95
        X: =33.17
        Y: =673
        ZIndex: =54

    Image2_66 As image:
        Height: =41
        Image: =carrier_logo_300
        PaddingRight: =0.00
        PaddingTop: =0.00
        Width: =266.56
        X: =1099.44
        Y: =9
        ZIndex: =55

    Rectangle2_451 As rectangle:
        Fill: =RGBA(0, 40, 85, 1)
        Height: =1
        Width: =1366
        X: =0.00
        Y: =150
        ZIndex: =57

    Btn1_6 As button:
        AutoDisableOnSelect: =
        Fill: =RGBA(0, 18, 107, 1)
        Height: =29
        OnSelect: |
            =Set(BotonActivo,"Boton1");
            Set(Pregunta,Preg1_31.Text); //Variable que me trae la pregunta
            UpdateContext({ShowPopUp : true}); //Variable para habilitar el ModalPopUp
        PaddingRight: =6.37
        PaddingTop: =6.37
        Size: =17
        Text: ="Justificación"
        Visible: =If(Resp1_5.Selected.Value = "N", true, false) 
        Width: =173
        X: =1182
        Y: =115
        ZIndex: =69

    Container1_6 As groupContainer.manualLayoutContainer:
        Height: =768
        PaddingRight: =0.00
        PaddingTop: =0.00
        Visible: =ShowPopUp
        Width: =1366
        X: =0.00
        ZIndex: =71

        HtmlText3_20 As htmlViewer:
            Height: =768
            HtmlText: |-
                ="<div style=""
                position: absolute;
                  text-align: center;
                  color: #fff;
                  box-shadow: 0px 0px 25px #222;
                  backdrop-filter: blur(10px);
                height:"& App.Height &"px;
                width:"&App.Width &"px;""></div>"
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0.00
            PaddingTop: =0.00
            Size: =14.04
            Visible: =ShowPopUp
            Width: =1366
            ZIndex: =1

        Container2_6 As groupContainer.manualLayoutContainer:
            Fill: =RGBA(227, 234, 243, 1)
            Height: =595
            PaddingRight: =0.00
            PaddingTop: =0.00
            Width: =1272.89
            X: =56
            Y: =112
            ZIndex: =2

            Rectangle3_7 As rectangle:
                Fill: =RGBA(0, 40, 85, 1)
                Height: =65
                Width: =1272.89
                X: =0.00
                ZIndex: =4

            Button7_6 As button:
                BorderStyle: =BorderStyle.None
                DisplayMode: |-
                    =//Validacion de boton de que debe cumplir y escribir en justificacion
                    If(IsBlank(TextInput1_38),DisplayMode.Disabled,DisplayMode.Edit) //Lo que dice este codigo es de que si el input text de la justificacion esta en blanco, que el boton sea disable y si tiene algo escrito, que se active el boton para seguir con la accion
                Fill: =RGBA(97, 181, 73, 1)
                FontWeight: =FontWeight.Bold
                OnSelect: |+
                    =/*
                    // Set file1 name
                        Set(fileName1, Concatenate(TextInput1_3.Text &"_1",Now(),".jpg"));  //NOMBRE_1_09/05/2023_.JPG
                    
                    //CONVERTIR ARCHIVO
                    Set(attachmentValue1, JSON(UploadedImage7.Image, JSONFormat.IncludeBinaryData)); 
                        Set(attachment1Base64Only, Mid(attachmentValue1, Find(",", attachmentValue1)+1, Len(attachmentValue1) - Find(",", attachmentValue1)-1 ));
                    
                          // Upload file1 and get url
                    Set(attachment1Link,Insert_Img_MP.Run(fileName1,attachment1Base64Only).imagenh);
                    */
                    
                    
                    // Set file1 name
                        Set(fileName1, Concatenate(TextInput1_35.Text &"_1",Now(),".jpg"));
                    
                     
                    
                        // Get file1 binary data and convert it to base64
                        Set(attachmentValue1, JSON(UploadedImage7_6.Image, JSONFormat.IncludeBinaryData));
                        Set(attachment1Base64Only, Mid(attachmentValue1, Find(",", attachmentValue1)+1, Len(attachmentValue1) - Find(",", attachmentValue1)-1 ));
                    
                     
                    
                        // Upload file1 and get url
                        //Set(attachment1Link,Flujo_ImagenesMP.Run(fileName1,attachment1Base64Only).sharepointfilelink);
                    
                    Set(attachment1Link,Flujo_ImagenesMP.Run(fileName1,attachment1Base64Only).sharepointfilelink);
                    
                    
                    
                    
                    
                    
                    
                    //INGRESAR DATOS A LA TABLA HALLAZGOS
                    Patch(CMXE_TablaH_MP,Defaults(CMXE_TablaH_MP),
                    {
                    Asignado: Dropdown4_7.Selected.Value,
                    Localizacion: TextInput1_34.Text,
                    Proc_No: TextInput1_35.Text,
                    Nom_Maquina:TextInput1_36.Text,
                    Clas_Mantenimiento: TextInput1_37.Text,
                    Fecha_Inicio: Now(),
                    Justificacion: TextInput1_38.Text,
                    Imagenes: attachment1Link,
                    Actividad: ACT_5.Text,
                    Estatus: "Abierto"
                    });
                    
                    UpdateContext({ShowPopUp: false}); //En este boton lo que debera de ser es enviar los datos que traje y cerrar el ModalPopUp
                    Reset(TextInput1_38);
                    Reset(AddMediaButton6_6);
                    
                    
                    
                    
                    Set(BotonActivo, "");
                    
                    
                    
                PaddingRight: =6.37
                PaddingTop: =6.37
                Size: =19.14
                Text: ="Enviar"
                Width: =204.07
                X: =534.40
                Y: =538
                ZIndex: =5

            Icon4_7 As icon.Cancel:
                Color: =RGBA(255, 255, 255, 1)
                Height: =65
                Icon: =Icon.Cancel
                OnSelect: |-
                    =UpdateContext({ShowPopUp: false});
                    Reset(TextInput1_38);
                    Reset(AddMediaButton6_6);
                    Reset(Dropdown4_7)
                PaddingRight: =0.00
                PaddingTop: =0.00
                Width: =81.63
                X: =1191.25
                ZIndex: =6

            Image4_7 As image:
                Height: =65
                Image: =carrier_logo_300
                PaddingRight: =0.00
                PaddingTop: =0.00
                Width: =150.49
                X: =25.51
                ZIndex: =7

            Label9_100 As label:
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =65
                PaddingRight: =6.37
                PaddingTop: =6.37
                Size: =38.26
                Text: ="Reporte de hallazgo"
                Width: =531.85
                X: =369.88
                ZIndex: =8

            AddMediaWithImage6_6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                UploadedImage7_6 As image:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    Height: =139
                    Image: =If(IsBlank(AddMediaButton6_6.Media), SampleImage, AddMediaButton6_6.Media)
                    PaddingRight: =0.00
                    PaddingTop: =0.00
                    Width: =239.78
                    X: =988.47
                    Y: =380
                    ZIndex: =19

                AddMediaButton6_6 As addMedia:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    ChangePictureText: ="Cambiar fotografia"
                    Height: =64
                    Size: =19.77
                    Text: ="Adjuntar evidencia"
                    Width: =247.77
                    X: =711
                    Y: =417
                    ZIndex: =20

            Group10_6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                Label9_104 As label:
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Text: |-
                        ="Nombre de la maquina:"
                    Width: =295.91
                    X: =25.51
                    Y: =155
                    ZIndex: =14

                TextInput1_36 As text:
                    Default: =Dato_NomMaquina
                    DisplayMode: =DisplayMode.View
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Width: =470.62
                    X: =25.51
                    Y: =195
                    ZIndex: =15

            Group11_6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                Label9_105 As label:
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Text: |-
                        ="Clase de mantenimiento:"
                    Width: =318.86
                    X: =580.33
                    Y: =155
                    ZIndex: =16

                TextInput1_37 As text:
                    Default: =Dato_ClassMtto
                    DisplayMode: =DisplayMode.View
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Width: =438.75
                    X: =580.33
                    Y: =195
                    ZIndex: =17

            Group12_7 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                Label9_102 As label:
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Text: |-
                        ="Proc_No:"
                    Width: =278.06
                    X: =404.31
                    Y: =65
                    ZIndex: =12

                TextInput1_35 As text:
                    Default: =Dato_Proc_No
                    DisplayMode: =DisplayMode.View
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Width: =369.88
                    X: =404.31
                    Y: =105
                    ZIndex: =13

            Group13_6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                Label9_101 As label:
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Text: |-
                        ="Localización:"
                    Width: =233.41
                    X: =25.51
                    Y: =65
                    ZIndex: =10

                TextInput1_34 As text:
                    Default: =Dato_Localizacion
                    DisplayMode: =DisplayMode.View
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Width: =311.19
                    X: =25.51
                    Y: =105
                    ZIndex: =11

            Group14_6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                ACT_5 As text:
                    Default: =Pregunta
                    DisplayMode: =DisplayMode.View
                    Height: =68
                    Mode: =TextMode.MultiLine
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Width: =1200.18
                    X: =25.51
                    Y: =283
                    ZIndex: =9

                Label9_106 As label:
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Text: |-
                        ="Actividad:"
                    Width: =191.32
                    X: =25.51
                    Y: =243
                    ZIndex: =18

            Group15_6 As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =19

                Label9_107 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =48
                    PaddingRight: =6.37
                    PaddingTop: =6.37
                    Size: =16.58
                    Text: |-
                        ="Justificación:"
                    Width: =443.84
                    X: =25.51
                    Y: =351
                    ZIndex: =2

                TextInput1_38 As text:
                    BorderColor: =RGBA(0, 0, 0, 1)
                    BorderThickness: =1
                    Clear: =true
                    Default: =
                    Height: =120
                    Mode: =TextMode.MultiLine
                    PaddingRight: =6.59
                    PaddingTop: =6.59
                    Reset: =true
                    Size: =17.13
                    Width: =632.62
                    X: =26.36
                    Y: =399
                    ZIndex: =3

            Label9_103 As label:
                FontWeight: =FontWeight.Bold
                PaddingRight: =6.37
                PaddingTop: =6.37
                Size: =16.58
                Text: |-
                    ="Persona que reporta hallazgo:"
                Width: =369.88
                X: =858.36
                Y: =65
                ZIndex: =21

            Dropdown4_7 As dropdown:
                BorderColor: =RGBA(0, 40, 85, 1)
                BorderThickness: =1
                ChevronBackground: =RGBA(0, 40, 85, 1)
                Default: =Operador
                Items: |+
                    = 
                     Split(Concat(Gallery2.AllItems, "" & Title2 & Char(10)), Char(10))
                    
                    //Concatenate(DropdownAsig,DropdownInvolu)
                    
                    //Split(Concat(Gallery2.AllItems , "" & Title2 & Char(10)),Concat(AsignadoOp,"" & NombreOp & Char(10), Char(10)))
                    
                     //Split(Concat(Gallery2.AllItems, "" & Title2 & Char(10)&Operador), Char(10))
                    
                    //Concatenate(Split(Concat(Gallery2.AllItems, "" & Title2 & Char(10)), Char(10)))
                    
                    /*Split(
                        Concatenate(
                            Text(Title2, "[$-en-US]0") &Char(10) & Text(Operador, "[$-en-US]0") & Char(10)
                        ),
                        Char(10)
                    )*/
                    
                    
                    
                    
                    
                    
                PaddingRight: =12.76
                PaddingTop: =12.76
                Size: =16.58
                Width: =367.32
                X: =858.36
                Y: =105
                ZIndex: =22

